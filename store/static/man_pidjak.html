<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Classic Pidjak</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="style_boot.css">
</head>
<body>
	<header>
	    <nav class="navbar navbar-expand-sm bg-dark fixed-top py-3">
	        <div class="container-fluid">
	            <a class="navbar-brand text-white" href="index.html">Bv & Bl</a>
	            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
	                <span class="navbar-toggler-icon"></span>
	            </button>
	            <div class="collapse navbar-collapse" id="navbarNav">
	                <ul class="navbar-nav me-auto">
	                    <li class="nav-item">
	                        <a class="nav-link text-white" href="registration.html">Registration</a>
	                    </li>
	                    <li class="nav-item">
	                        <a class="nav-link text-white" href="login.html">Login</a>
	                    </li>
	                    <li class="nav-item dropdown">
	                        <a class="nav-link text-white dropdown-toggle" href="#">Catalog</a>
	                        <ul class="dropdown-menu">
	                            <li><a class="dropdown-item" href="catalog_men.html">For Men</a></li>
	                            <li><a class="dropdown-item" href="catalog_women.html">For Women</a></li>
	                            <li><a class="dropdown-item" href="#">For Children</a></li>
	                        </ul>
	                    </li>
	                </ul>
	                <ul class="navbar-nav">
	                    <li class="nav-item">
	                        <a class="nav-link text-white" href="cart.html">
	                            <i class="bi bi-cart"></i> Cart
	                        </a>
	                    </li>
	                </ul>
	                <ul class="navbar-nav" id="userNav" style="display: none;">
	                    <li class="nav-item">
	                        <span class="nav-link text-white" id="usernameDisplay"></span>
	                    </li>
	                    <li class="nav-item">
	                        <button class="btn btn-outline-light" id="logoutBtn">Logout</button>
	                    </li>
	                </ul>
	            </div>
	        </div>
	    </nav>
	</header>

	<br><br>
	<main>
		<div class="row">
			<div class="col-md-3 p-5">
				<a href="index.html">
					<button type="button" class="btn btn-secondary">Go back</button>
				</a>
			</div>
		</div>

		<div class="row align-items-center">
			<div class="col-md-6 bg-light p-5 rounded b">
				<h1 class="display-4">Classic Pidjak</h1>
				<p class="lead">A staple piece for any wardrobe.</p>
				<p>40000TG</p>

				<h2 class="py-5">COMPOSITION</h2>
				<p class="mb-5">We work with monitoring programs to ensure that our standards regarding social and environmental issues...</p>
				<p><strong>OUTER</strong><br>55% POLYESTER <br>45% WOOL</p>

				<button type="button" class="btn btn-primary" onclick="addToCart('Pidjak', 40000, 'clothes/men_clothes/pidjak.jpg')">Add to cart</button>
			</div>
			<div class="col-md-6 text-center">
				<figure>
    				<img src="https://static.zara.net/assets/public/b155/37f7/ce8245aba1c2/0135179a768b/06792865401-e1/06792865401-e1.jpg?ts=1727775303398&w=850" alt="" class="img-fluid w-50">
				</figure>
			</div>
		</div>
	</main>

	<script>
	    document.addEventListener("DOMContentLoaded", function () {
        const userNav = document.getElementById("userNav");
        const usernameDisplay = document.getElementById("usernameDisplay");
        const logoutBtn = document.getElementById("logoutBtn");

        function checkAuth() {
            fetch("/getUser", {
                method: "GET",
                credentials: "include"
            })
            .then(response => {
                if (!response.ok) throw new Error("Unauthorized");
                return response.json();
            })
            .then(data => {
                if (data.username) {
                    usernameDisplay.textContent = data.username;
                    userNav.style.display = "flex";
                } else {
                    userNav.style.display = "none";
                }
            })
            .catch(() => {
                document.cookie = "Authorization=; Path=/; Expires=Thu, 01 Jan 1970 00:00:00 UTC;";
                userNav.style.display = "none";
            });
        }

        logoutBtn.addEventListener("click", function () {
            fetch("/logout", { method: "POST", credentials: "include" }) 
            .then(() => {
                document.cookie = "Authorization=; Path=/; Expires=Thu, 01 Jan 1970 00:00:00 UTC;";
                usernameDisplay.textContent = "";
                userNav.style.display = "none";
                window.location.href = "/index.html";
            });
        });

        checkAuth(); // Проверка авторизации при загрузке страницы
    });
	</script>
</body>
</html>
